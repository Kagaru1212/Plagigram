{% extends 'base.html' %}

{% block content %}
<h1>{{title}}</h1>
<form action="" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-error">{{ form.non_field_errors }}</div>
    {% for f in form %}
        {% if f.name != 'tags' %}  {# Исключаем поле tags из текущего цикла #}
            <p><label class="form-label" for="{{ f.id_for_label }}">{{ f.label }}</label>{{ f }}</p>
            <div class="form-error">{{ f.errors }}</div>
        {% endif %}
    {% endfor %}

    {{ media_formset.management_form }}
    {% for form in media_formset %}
        <p>
            {{ form.video_file.label_tag }} {{ form.video_file }}
            {{ form.image.label_tag }} {{ form.image }}
        </p>
    {% endfor %}

    <p>
        <label class="form-label" for="{{ form.tags.id_for_label }}">{{ form.tags.label }}</label>
        {{ form.tags }}
        <datalist id="tag_list">
            {% for tag in tag_list %}
                <option value="{{ tag.tag }}">
            {% endfor %}
        </datalist>
    </p>

    <p><button type="submit">Send</button></p>
</form>
{% endblock %}
